{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "project",
  "description": "project",
  "type": "object",
  "required": [],
  "properties": {
    "project_name": {
      "description": "The identifier of this application",
      "type": "string"
    },
    "namespace": {
      "description": "Dot separated identifier which is typically used for identifier of modules",
      "type": "string"
    },
    "project_title": {
      "description": "The title of this project",
      "type": "string"
    },
    "laplacian_modules": {
      "description": "laplacian_module",
      "type": "array",
      "items": {
        "$ref": "#/definitions/entities/laplacian_module"
      }
    },
    "laplacian_generators": {
      "description": "laplacian_generator",
      "type": "array",
      "items": {
        "$ref": "#/definitions/entities/laplacian_generator"
      }
    },
    "laplacian_projects": {
      "description": "laplacian_project",
      "type": "array",
      "items": {
        "$ref": "#/definitions/entities/laplacian_project"
      }
    },
    "laplacian_module_dependencies": {
      "description": "laplacian_module_dependency",
      "type": "array",
      "items": {
        "$ref": "#/definitions/entities/laplacian_module_dependency"
      }
    },
    "entities": {
      "description": "エンティティ",
      "type": "array",
      "items": {
        "$ref": "#/definitions/entities/entity"
      }
    },
    "value_domain_types": {
      "description": "value_domain_type",
      "type": "array",
      "items": {
        "$ref": "#/definitions/entities/value_domain_type"
      }
    }
  },
  "definitions": {
    "value_domain_types": {
      "identifier": {
        "description": "主要言語で識別子として使用可能な文字列",
        "pattern": "^[_$a-zA-Z][_$a-zA-Z0-9]*$",
        "type": "string"
      },
      "namespace": {
        "description": "名前空間",
        "pattern": "^[_a-zA-Z][_$a-zA-Z0-9]*(\\.[_a-zA-Z][_$a-zA-Z0-9]*)*$",
        "type": "string"
      },
      "base_type": {
        "description": "基本型",
        "enum":[
           "string",
           "boolean",
           "number"
        ],
        "type": "string"
      }
    },
    "entities": {
      "laplacian_module": {
        "description": "laplacian_module",
        "type": "object",
        "required": [
          "name",
          "group",
          "version"
        ],
        "properties": {
          "name": {
            "description": "The name of this laplacian_module.",
            "type": "string"
          },
          "group": {
            "description": "The group of this laplacian_module.",
            "type": "string"
          },
          "type": {
            "description": "The type of this laplacian_module.",
            "enum":[
              "generator",
              "template",
              "model",
              "plugin"
            ],
            "type": "string"
          },
          "subname": {
            "description": "The subname of this laplacian_module.",
            "type": "string"
          },
          "version": {
            "description": "The version of this laplacian_module.",
            "type": "string"
          },
          "description": {
            "description": "The description of this laplacian_module.",
            "type": "string"
          },
          "repository": {
            "description": "The url of the code repository this project is hosted",
            "type": "string"
          }
        }
      },
      "laplacian_generator": {
        "description": "laplacian_generator",
        "type": "object",
        "required": [
          "name",
          "group",
          "version"
        ],
        "properties": {
          "name": {
            "description": "The name of this laplacian_generator.",
            "type": "string"
          },
          "group": {
            "description": "The group of this laplacian_generator.",
            "type": "string"
          },
          "version": {
            "description": "The version of this laplacian_generator.",
            "type": "string"
          },
          "description": {
            "description": "The description of this laplacian_generator.",
            "type": "string"
          },
          "plugins": {
            "description": "plugins",
            "type": "array",
            "items": {
              "$ref": "#/definitions/entities/laplacian_plugin_dependency"
            }
          },
          "models": {
            "description": "models",
            "type": "array",
            "items": {
              "$ref": "#/definitions/entities/laplacian_model_dependency"
            }
          },
          "templates": {
            "description": "templates",
            "type": "array",
            "items": {
              "$ref": "#/definitions/entities/laplacian_template_dependency"
            }
          }
        }
      },
      "laplacian_project": {
        "description": "laplacian_project",
        "type": "object",
        "required": [
        ],
        "properties": {
          "namespace": {
            "description": "The namespace of this laplacian_project.",
            "type": "string"
          }
        }
      },
      "laplacian_module_dependency": {
        "description": "laplacian_module_dependency",
        "type": "object",
        "required": [
          "group",
          "name",
          "version",
          "type"
        ],
        "properties": {
          "group": {
            "description": "The group of this laplacian_module_dependency.",
            "type": "string"
          },
          "name": {
            "description": "The name of this laplacian_module_dependency.",
            "type": "string"
          },
          "subname": {
            "description": "The subname of this laplacian_module_dependency.",
            "type": "string"
          },
          "version": {
            "description": "The version of this laplacian_module_dependency.",
            "type": "string"
          },
          "type": {
            "description": "The type of this laplacian_module_dependency.",
            "type": "string"
          }
        }
      },
      "laplacian_model_dependency": {
        "description": "laplacian_model_dependency",
        "type": "object",
        "required": [
        ],
        "properties": {
        }
      },
      "laplacian_template_dependency": {
        "description": "laplacian_template_dependency",
        "type": "object",
        "required": [
        ],
        "properties": {
        }
      },
      "laplacian_plugin_dependency": {
        "description": "laplacian_plugin_dependency",
        "type": "object",
        "required": [
        ],
        "properties": {
        }
      },
      "entity": {
        "description": "エンティティ",
        "type": "object",
        "required": [
          "name"
        ],
        "properties": {
          "name": {
            "description": "名称",
            "type": "string"
          },
          "namespace": {
            "allOf": [{
            "description": "名前空間",
            "type": "string"
            }, {
            "$ref": "#/definitions/value_domain_types/namespace"
            }]
          },
          "identifier": {
            "allOf": [{
            "description": "識別子 省略時は名称を使用",
            "type": "string"
            }, {
            "$ref": "#/definitions/value_domain_types/identifier"
            }]
          },
          "description": {
            "description": "詳細",
            "type": "string"
          },
          "value_object": {
            "description": "値オブジェクトかどうか",
            "type": "boolean"
          },
          "subtype_of": {
            "description": "The name of the entity which this entity is subtype of",
            "type": "string"
          },
          "subtype_key_value": {
            "description": "The value of subtype key that represents this type of entity,
which is used when implementing polymorphism. The name of entity is used by default.",
            "type": "string"
          },
          "deprecated": {
            "description": "Defines this entity is deprecated or not.",
            "type": "boolean"
          },
          "examples": {
            "description": "examples which explain actual usage of this entity",
            "type": "any"
          },
          "properties": {
            "description": "The properties of this entity (excluding supertypes')",
            "type": "array",
            "items": {
              "$ref": "#/definitions/entities/property"
            }
          },
          "relationships": {
            "description": "The relationships with other entities (excluding supertypes')",
            "type": "array",
            "items": {
              "$ref": "#/definitions/entities/relationship"
            }
          },
          "queries": {
            "description": "このエンティティに対するルートクエリ",
            "type": "array",
            "items": {
              "$ref": "#/definitions/entities/query"
            }
          }
        }
      },
      "named_param": {
        "description": "named_param",
        "type": "object",
        "required": [
          "name",
          "type"
        ],
        "properties": {
          "name": {
            "description": "The name of this named_param.",
            "type": "string"
          },
          "type": {
            "description": "The type of this named_param.",
            "type": "string"
          },
          "description": {
            "description": "The description of this named_param.",
            "type": "string"
          }
        }
      },
      "named_value": {
        "description": "named_value",
        "type": "object",
        "required": [
          "name",
          "expression"
        ],
        "properties": {
          "name": {
            "description": "The name of this named_value.",
            "type": "string"
          },
          "expression": {
            "description": "The expression of this named_value.",
            "type": "string"
          }
        }
      },
      "property": {
        "description": "property",
        "type": "object",
        "required": [
          "name",
          "type"
        ],
        "properties": {
          "name": {
            "description": "The name of this property.",
            "type": "string"
          },
          "identifier": {
            "allOf": [{
            "description": "The identifier of this property.",
            "type": "string"
            }, {
            "$ref": "#/definitions/value_domain_types/identifier"
            }]
          },
          "primary_key": {
            "description": "Defines this property is primary_key or not.",
            "type": "boolean"
          },
          "subtype_key": {
            "description": "Defines this property is subtype_key or not.",
            "type": "boolean"
          },
          "type": {
            "allOf": [{
            "description": "The type of this property.",
            "type": "string"
            }, {
            "$ref": "#/definitions/value_domain_types/base_type"
            }]
          },
          "domain_type_name": {
            "description": "制約型名",
            "type": "string"
          },
          "size": {
            "description": "the maximum allowed size of the content of this property",
            "type": "number"
          },
          "optional": {
            "description": "Defines this property is optional or not.",
            "type": "boolean"
          },
          "description": {
            "description": "The description of this property.",
            "type": "string"
          },
          "default_value": {
            "description": "The default value of this property, which is used when the actual value is null",
            "type": "string"
          },
          "example_values": {
            "description": "The example_values of this property.",
            "type": "any"
          },
          "table_column_name": {
            "description": "The table_column_name of this property.",
            "type": "string"
          },
          "snippet": {
            "description": "The snippet of this property.",
            "type": "string"
          },
          "multiple": {
            "description": "Defines this property is multiple or not.",
            "type": "boolean"
          },
          "deprecated": {
            "description": "Defines this property is deprecated or not.",
            "type": "boolean"
          },
          "domain": {
            "description": "domain",
            "$ref": "#/definitions/entities/value_domain"
          }
        }
      },
      "property_mapping": {
        "description": "property_mapping",
        "type": "object",
        "required": [
          "from",
          "to"
        ],
        "properties": {
          "from": {
            "description": "The from of this property_mapping.",
            "type": "string"
          },
          "to": {
            "description": "The to of this property_mapping.",
            "type": "string"
          },
          "null_value": {
            "description": "The null_value of this property_mapping.",
            "type": "string"
          }
        }
      },
      "query": {
        "description": "The queries from which all navigation originates.",
        "type": "object",
        "required": [
          "name",
          "snippet"
        ],
        "properties": {
          "name": {
            "description": "クエリ名称",
            "type": "string"
          },
          "identifier": {
            "allOf": [{
            "description": "識別子",
            "type": "string"
            }, {
            "$ref": "#/definitions/value_domain_types/identifier"
            }]
          },
          "type": {
            "description": "結果型",
            "type": "string"
          },
          "result_entity_name": {
            "description": "クエリ結果エンティティ名",
            "type": "string"
          },
          "description": {
            "description": "詳細",
            "type": "string"
          },
          "cardinality": {
            "description": "多重度",
            "type": "string"
          },
          "snippet": {
            "description": "クエリスクリプト",
            "type": "string"
          },
          "deprecated": {
            "description": "Defines this query is deprecated or not.",
            "type": "boolean"
          }
        }
      },
      "relationship": {
        "description": "relationship",
        "type": "object",
        "required": [
          "name",
          "cardinality",
          "reference_entity_name"
        ],
        "properties": {
          "name": {
            "description": "The name of this relationship.",
            "type": "string"
          },
          "identifier": {
            "allOf": [{
            "description": "The identifier of this relationship.",
            "type": "string"
            }, {
            "$ref": "#/definitions/value_domain_types/identifier"
            }]
          },
          "cardinality": {
            "description": "The cardinality of this relationship.",
            "enum":[
              "1",
              "0..1",
              "*",
              "1..*"
            ],
            "type": "string"
          },
          "reference_entity_name": {
            "description": "The reference_entity_name of this relationship.",
            "type": "string"
          },
          "aggregate": {
            "description": "Defines this relationship is aggregate or not.",
            "type": "boolean"
          },
          "inherited": {
            "description": "Defines this relationship is inherited or not.",
            "type": "boolean"
          },
          "reverse_of": {
            "description": "The reverse_of of this relationship.",
            "type": "string"
          },
          "description": {
            "description": "The description of this relationship.",
            "type": "string"
          },
          "snippet": {
            "description": "The snippet of this relationship.",
            "type": "string"
          },
          "deprecated": {
            "description": "Defines this relationship is deprecated or not.",
            "type": "boolean"
          },
          "examples": {
            "description": "The examples of this relationship.",
            "type": "any"
          },
          "mappings": {
            "description": "mappings",
            "type": "array",
            "items": {
              "$ref": "#/definitions/entities/property_mapping"
            }
          }
        }
      },
      "value_domain_type": {
        "description": "value_domain_type",
        "type": "object",
        "required": [
          "domain",
          "name",
          "type"
        ],
        "properties": {
          "name": {
            "description": "The name of this value_domain_type.",
            "type": "string"
          },
          "type": {
            "allOf": [{
            "description": "The type of this value_domain_type.",
            "type": "string"
            }, {
            "$ref": "#/definitions/value_domain_types/base_type"
            }]
          },
          "description": {
            "description": "The description of this value_domain_type.",
            "type": "string"
          },
          "domain": {
            "description": "domain",
            "$ref": "#/definitions/entities/value_domain"
          }
        }
      },
      "value_domain": {
        "description": "value_domain",
        "type": "object",
        "required": [
        ],
        "properties": {
          "pattern": {
            "description": "許容される値のパターン(正規表現)",
            "type": "string"
          },
          "choices": {
            "description": "許容される値のリスト",
            "type": "array",
            "items": {
              "$ref": "#/definitions/entities/value_item"
            }
          }
        }
      },
      "value_item": {
        "description": "value_item",
        "type": "object",
        "required": [
          "value"
        ],
        "properties": {
          "value": {
            "description": "The value of this value_item.",
            "type": "string"
          },
          "label": {
            "description": "The label of this value_item.",
            "type": "string"
          },
          "description": {
            "description": "The description of this value_item.",
            "type": "string"
          }
        }
      }
    }
  }
}